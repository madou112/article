import{_ as M,u as R,a as q,j as s,r as i,o as p,c as v,b as e,d as l,w as o,F as D,h as I,k as A,v as G,f as c,t as d,p as J,g as K}from"./index-abfffda9.js";import{a as Q,d as W}from"./article-cat-fb8a70e4.js";import{a as X,f as Y,c as Z}from"./article-4f7d832d.js";const ee=m=>(J("data-v-f765f442"),m=m(),K(),m),te=ee(()=>e("div",{class:"flex-grow"},null,-1)),ae={class:"boxf"},le={class:"demo-collapse"},ne={class:"header"},oe=["onClick"],se={class:"infinite-list",style:{overflow:"auto"}},ie=["onClick"],ue={style:{"text-align":"right"}},de={__name:"userHomeView",setup(m){const k=R(),N=q(),y=s([]),h=s([]),f=s(1),g=s(5),w=s(0),C=s(!0),x=s(!1),r=s(),z=s(),T=()=>{confirm("是否要退出？")&&(k.commit("setLoginState",!1),k.commit("setToken",null),N.push("/"))},$=()=>{Q().then(n=>{y.value=n.data.data.articleCats})},_=n=>{if(n==null){let t={current:f.value,size:g.value};X(t).then(u=>{h.value=u.data.data.pages.records,w.value=u.data.data.pages.total,C.value=!0})}else Y(n).then(t=>{t.data.code==2?alert("没有数据"):(h.value=t.data.data.articles,C.value=!1)})},B=n=>{g.value=n,_()},H=n=>{f.value=n,_()},U=n=>{Z(n).then(t=>{r.value=t.data.data.article,W(r.value.articleCatId).then(u=>{z.value=u.data.data.articleCat,x.value=!0})})};return $(),_(null),(n,t)=>{const u=i("el-menu-item"),j=i("el-menu"),S=i("el-tag"),F=i("el-collapse-item"),L=i("el-collapse"),V=i("el-text"),O=i("el-pagination"),b=i("el-divider"),P=i("el-dialog");return p(),v("div",null,[e("div",null,[l(j,{mode:"horizontal","background-color":"#545c64","text-color":"#fff"},{default:o(()=>[l(u,{index:"0"},{default:o(()=>[c("知识库系统")]),_:1}),te,l(u,{index:"1"},{default:o(()=>[c("欢迎您，用户")]),_:1}),l(u,{index:"2",onClick:t[0]||(t[0]=a=>T())},{default:o(()=>[c("退出")]),_:1})]),_:1})]),e("div",ae,[e("div",le,[l(L,null,{default:o(()=>[l(F,{title:"文章分类"},{default:o(()=>[e("div",ne,[e("div",{onClick:t[1]||(t[1]=a=>_(null))},[l(S,{type:"success",hit:"",size:"large"},{default:o(()=>[c("全部")]),_:1})]),(p(!0),v(D,null,I(y.value,a=>(p(),v("div",{key:a.id,onClick:E=>_(a.id)},[l(S,{type:"info",size:"large",hit:""},{default:o(()=>[c(d(a.catName),1)]),_:2},1024)],8,oe))),128))])]),_:1})]),_:1})]),e("div",null,[e("ul",se,[(p(!0),v(D,null,I(h.value,a=>(p(),v("li",{key:a.id,class:"infinite-list-item",onClick:E=>U(a.id)},[e("div",null,[l(V,{class:"mx-1",type:"info"},{default:o(()=>[c(d(a.title),1)]),_:2},1024)]),e("div",ue,[l(V,{class:"mx-1",type:"danger"},{default:o(()=>[c(d(a.createTime),1)]),_:2},1024)])],8,ie))),128))])]),A(e("div",null,[l(O,{"current-page":f.value,"onUpdate:currentPage":t[2]||(t[2]=a=>f.value=a),"page-size":g.value,"onUpdate:pageSize":t[3]||(t[3]=a=>g.value=a),"page-sizes":[5,10,15,20],small:n.small,background:n.background,layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:B,onCurrentChange:H},null,8,["current-page","page-size","small","background","total"])],512),[[G,C.value]])]),l(P,{modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=a=>x.value=a),title:"文章详情",style:{width:"50%"}},{default:o(()=>[e("div",null,[e("h1",null,d(r.value.title),1)]),e("div",null,[e("span",null," 文章分类："+d(z.value.catName),1),e("span",null," 文章作者ID："+d(r.value.userinfoId),1)]),l(b),e("div",null,d(r.value.content),1),l(b),e("div",null,"发布时间："+d(r.value.createTime),1)]),_:1},8,["modelValue"])])}}},pe=M(de,[["__scopeId","data-v-f765f442"]]);export{pe as default};
